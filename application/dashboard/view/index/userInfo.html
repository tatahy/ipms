<!-- // userInfo.html： -->


<div id="divUsergroup" data-user-id="{$user.id}" style="margin-top:10px;">
	<!-- <a href="#divUserBasicInfo" data-toggle="collapse" class="label label-warning" style="font-size:16px;"><span class="glyphicon glyphicon-duplicate"></span>&nbsp;基本信息</a> -->
	
	<!-- Split button -->
<div class="btn-group" >
  <a href="#divUserBasicInfo" data-toggle="collapse" class="label label-warning" style="font-size:16px;border-top-right-radius: 0;border-bottom-right-radius: 0;"><span class="glyphicon glyphicon-duplicate"></span>&nbsp;基本信息</a>
  <a class="label label-warning" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="font-size:16px;border-top-left-radius: 0;border-bottom-left-radius: 0;border-left: #eea236 solid 1px;margin-left: -5px;">
    <span class="caret"></span>
    <span class="sr-only">Toggle Dropdown</span>
  </a>
  <ul class="dropdown-menu">
    <li><a href="#userInfo" class="aModalTrig" data-toggle="tooltip" data-title="修改个人基本信息" data-trig-form="info"><span><span class="glyphicon glyphicon-edit"></span></span>修改信息</a></li>
    <li role="separator" class="divider"></li>
    <li><a href="#userInfo" class="aModalTrig" data-toggle="tooltip" data-title="重设登录密码" data-trig-form="pwd"><span><span class="glyphicon glyphicon-eye-open"></span></span>重设密码</a></li>
  </ul>
</div>
	
	<div id="divUserBasicInfo" class="row myRow collaps in" style="margin-top:10px;">		
		
		<div class="col-sm-3">
			<span>用户名：<strong style="font-size:16px;">{$user.username}</strong></span>	
		</div>
		
		<div class="col-sm-3">
			<span>注册手机号：<strong style="font-size:16px;">{$user.mobile}</strong></span>			
		</div>
			
		<div class="col-sm-6">
			<span>所属部门：<strong style="font-size:16px;">{$user.dept}</strong></span>		
		</div>
		
	</div>
	<hr>
	
	<a href="#divUserAuth" data-toggle="collapse" class="label label-warning" style="font-size:16px;"><span class="glyphicon glyphicon-alert"></span>&nbsp;系统权限</a>
		
	<div id="divUserAuth" class="row myRow collaps in" style="margin-top:10px;">		
		<div class="form-group col-sm-6">	
			<label><span class="text-info">【事务】</span></label>	
			<div style="border-bottom:solid 1px #ccc; padding:5px;">	
				{foreach name="$user.authority.iss" item="v" }
    			{if condition="($v==1)"} 
				<span class="label label-info"><span class="spAuthKey">{$key}</span><span class="glyphicon glyphicon-ok"></span></span>
				
				{else /} 
				<span class="text-muted"><span class="spAuthKey">{$key}</span><span class="glyphicon glyphicon-unchecked"></span></span>
				{/if}
				{/foreach}			
				
			</div>
		</div>
		
		<div class="form-group col-sm-6">	
			<label><span class="text-info">【资产】</span></label>	
			<div style="border-bottom:solid 1px #ccc; padding:5px;">	
				{foreach name="$user.authority.ass" item="v" }
    			{if condition="($v==1)"} 
				<span class="label label-info"><span class="spAuthKey">{$key}</span><span class="glyphicon glyphicon-ok"></span></span>
				
				{else /} 
				<span class="text-muted"><span class="spAuthKey">{$key}</span><span class="glyphicon glyphicon-unchecked"></span></span>
				{/if}
				{/foreach}			
				
			</div>
		</div>
		
		<div class="form-group col-sm-6">	
			<label><span class="text-default">【专利】</span></label>	
			<div style="border-bottom:solid 1px #ccc; padding:5px;">
				{foreach name="$user.authority.pat" item="v" }
    			{if condition="($v==1)"} 
				<span class="label label-info"><span class="spAuthKey">{$key}</span><span class="glyphicon glyphicon-ok"></span></span>
				
				{else /} 
				<span class="text-muted"><span class="spAuthKey">{$key}</span><span class="glyphicon glyphicon-unchecked"></span></span>
				{/if}
				{/foreach}			
				
			</div>
		</div>
		
		<div class="form-group col-sm-6">	
			<label><span class="text-default">【项目】</span></label>	
			<div style="border-bottom:solid 1px #ccc; padding:5px;">
				{foreach name="$user.authority.pro" item="v" }
    			{if condition="($v==1)"} 
				<span class="label label-info"><span class="spAuthKey">{$key}</span><span class="glyphicon glyphicon-ok"></span></span>
				
				{else /} 
				<span class="text-muted"><span class="spAuthKey">{$key}</span><span class="glyphicon glyphicon-unchecked"></span></span>
				{/if}
				{/foreach}
			</div>
		</div>
		
		<div class="form-group col-sm-6">	
			<label><span class="text-default">【论文】</span></label>	
			<div style="border-bottom:solid 1px #ccc; padding:5px;">
				{foreach name="$user.authority.the" item="v" }
    			{if condition="($v==1)"} 
				<span class="label label-info"><span class="spAuthKey">{$key}</span><span class="glyphicon glyphicon-ok"></span></span>
				
				{else /} 
				<span class="text-muted"><span class="spAuthKey">{$key}</span><span class="glyphicon glyphicon-unchecked"></span></span>
				{/if}
				{/foreach}
			</div>
		</div>
		
		<div class="form-group col-sm-6">	
			<label><span class="text-danger">【附件】</span></label>	
			<div style="border-bottom:solid 1px #ccc; padding:5px;">
				{foreach name="$user.authority.att" item="v" }
    			{if condition="($v==1)"} 
				<span class="label label-info"><span class="spAuthKey">{$key}</span><span class="glyphicon glyphicon-ok"></span></span>
				
				{else /} 
				<span class="text-muted"><span class="spAuthKey">{$key}</span><span class="glyphicon glyphicon-unchecked"></span></span>
				{/if}
				{/foreach}
			</div>
		</div>
		
		<div class="form-group col-sm-6">	
			<label><span class="text-danger">【后台管理】</span></label>	
			<div class="form-group" style="border-bottom:solid 1px #ccc; padding:5px;">
				{eq name="$user.authority.admin.enable" value="1"} 
				<span class="label label-info">有<span class="glyphicon glyphicon-ok"></span></span>
				{else /} 
				<span class="text-muted">无<span class="glyphicon glyphicon-unchecked"></span></span>
				{/eq}
			</div>
		</div>
	</div>
	<hr>
		
	<a href="#divUserGroup" data-toggle="collapse" class="label label-warning" style="font-size:16px;"><span class="glyphicon glyphicon-magnet"></span>&nbsp;所属用户组</a>
	
	<div id="divUserGroup" class="row myRow collaps in" style="margin-top:10px;">		
		<ul class="list-group">
			{volist name="userGroup" id="vo"}			
			<a class="list-group-item col-sm-4" style="border:0px;">【<span class="label label-info">{$vo.name}</span>】：{$vo.description}</a>
			<!-- <li class="list-group-item">【<span class="label label-info">{$vo.name}</span>】：{$vo.description}</li> -->
			
			{/volist}
		</ul>	
			
	</div>

</div>
<br>
<!-- Modal "modalUserInfo" -->
<div class="modal fade" id="modalUserInfo" role="dialog">
	<div class="modal-dialog modal-lg">
    
      <!-- Modal content-->
      	<div class="modal-content">
        <div class="modal-header bg-warning" style="border-radius:5px;">
          	<button type="button" class="close" data-dismiss="modal">&times;</button>
		  
          	<h4>【<strong>{$user.username}</strong>】<span></span></h4>
        </div>
		
        <div class="modal-body">
			<form id="fmUserInfo" action="">
				Info
			</form>
			
			<form id="fmUserPwd" action="">
				
				Pwd
			</form>
			
		</div>
		
		<div class="modal-footer" hidden="true">
        	<input type="button" class="btn btn-primary btn-sm" data-dismiss="modal" value="返回">  
          
        </div>
		</div>
	</div>

</div>
<!--/ Modal "modalUserInfo" -->

<!-- /pagewrap  -->

<script>

//**函数名：textEnToChi
 	//* 作用：本页面特定英文字符串转换成中文字符串
	//* 参数text，类型：字符串。值：不为空。说明：待转换的英文字符串。
	//* 返回值：中文字符串
function textEnToChi(text){
	switch(text){
		case 'edit':
            text='编辑';
        break;
        case 'audit':
            text='审核';
        break;
        case 'approve':
            text='审批';
        break;
        case 'execute':
            text='执行';
        break;
        case 'maintain':
            text='维护';
        break;
       //...................附件.....................
        case 'upload':
            text='上传';
        break;
        case 'download':
            text='下载';
        break;
        case 'erase':
            text='删除';
        break;
        case 'move':
            text='移动';
        break;
        case 'copy':
            text='复制';
        break;
		case 'enable':
	        text='启用';
         break;
	}
	return text;
};

var modalUserInfoShow=(h4Html,fmName)=>{
	var obj=$('#modalUserInfo');
	obj.find('.modal-header h4 span').html(h4Html);
	obj.find('form').hide();
	switch(fmName){
		case'info':
			$('#fmUserInfo').show();
			break;
		case'pwd':
			$('#fmUserPwd').show();
			break;
	}
	obj.modal();
};

$(document).ready(function(){
	//侧边栏消除li的active
	$('.nav .active').removeClass('active');
	//侧边栏本页对应a添加数字,其所在li加acitve
	$('.nav a[href="'+window.location.hash+'"]').closest('li').addClass('active');
	
	//将span的text转换成中文
	$('.spAuthKey').each(function(){
		var str=$(this).text();
		$(this).text(textEnToChi(str));
   	});
	
	// 设置各类tooltip
	$('#divUsergroup [data-toggle="tooltip"]').tooltip({triger:'focus',placement: 'auto bottom'});	
	
	$('.aModalTrig').click(function(){
		var h4Html=$(this).find('span').html()+$(this).data('title');
		var fmName=$(this).data('trigForm');
		modalUserInfoShow(h4Html,fmName);
		
	});
	

});
</script>
