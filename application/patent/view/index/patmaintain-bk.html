{include file="../application/common/headeruser.html" title="专利维护管理" }

<!-- pagewrap  -->
<div class="container-fluid">
	<h4>{$username}&nbsp;<span class="glyphicon glyphicon-calendar"></span>&nbsp;【{$rolename}】专利维护管理  <button type="button" class="btn btn-primary btn-sm btnReturn">返回</button></h4>
	<h3><span class="label label-warning glyphicon glyphicon-wrench">&nbsp;{$status}专利信息</span></h3>
	 
	<div class="tab-content">
    <div id="menu0" class="tab-pane fade in active">
		<form class="" role="form" method="post" action="{$home}/patent/index/patsave/role/maintainer">
			</br>
			<!-- 专利基本信息表单 -->
			<table class="table table-bordered table-striped table-responsive table-condensed">
				<tbody>
					<tr>
						<td>
							<div class="col-sm-4" ><p><strong>名称：</strong><span class="label label-warning" style="font-size:14px;">{$topic}</span></p></div>
							<div class="col-sm-2" ><p><strong>类型：</strong>{$pattype}</p></div>
							<div class="col-sm-2" ><p><strong>撰写人：</strong>{$author}</p></div>
							<div class="col-sm-3" ><p><strong>所属部门：</strong>{$dept}</p></div>
						</td>	
					</tr>
					
					<tr>
						<td>
							<div class="col-sm-4"><p><strong>专利关键词：</strong>{$keyword}</p></div>
							<div class="col-sm-6"><p><strong>专利简介：</strong>{$summary}</p></div>
							
						</td>					
					</tr>
					
					<tr>
						<td>
							
							<div class="col-sm-2">
								<a href="#" target="_blank" data-toggle="tooltip" data-placement="bottom" title="专利过程">
									<p><strong>状态：</strong>{$status}
								</a>
								
								</p>
							
							</div>
							<div class="col-sm-4">
								<p><strong>关联项目：</strong>
									{foreach $pronum as $num} 
										{if $num eq '无'}
											{$num}&nbsp;
										{else /}
											<a href="#" target="_blank" data-toggle="tooltip" data-placement="bottom" title="项目信息">{$num}&nbsp;</a>;
										{/if}
									{/foreach}
								</p>
							</div>
							
							<div class="col-sm-4">
								<p><strong>关联事务：</strong>
									{if $iss_topic eq 0}
										无
									{else /}
										<a href="{$home}/issue/index/issinfo/id/{$iss_id}" target="_blank" data-toggle="tooltip" data-placement="bottom" title="事务信息">{$iss_topic}&nbsp;({$issnum})</a>
									{/if}
								
									
								</p>
							</div>
						</td>					
					</tr>
					
					<tr>
						<td>
							
							<div class="col-sm-4"><p><strong>专利所有人：</strong>{$patowner}</p></div>
							<div class="col-sm-2"><p><strong>专利发明人：</strong>{$inventor} </p></div>
							<div class="col-sm-4"><p><strong>其他专利发明人：</strong>{$otherinventor} </p></div>
							
							
						</td>				
					</tr>
					
					<tr>
						<td>
							<div id="divAddnewDate" class="col-sm-2"><p><strong>填报/修改日期：</strong>{$addnewdate}</p></div>
							<div class="col-sm-2"><p><strong>提交日期：</strong>{$submitdate}</p></div>
							<!-- <div class="col-sm-2"><p><strong>申请日期：</strong>{$applydate}</p></div> -->
							<!-- <div id="divAJDate" class="col-sm-2"><p><strong>授权/驳回日期：</strong>{$authrejectdate}</p></div> -->
							<!-- <div id="divRADate" class="col-sm-2"><p><strong>续费/放弃日期：</strong>{$renewabandondate}</p></div> -->
							<!-- <div id="divNextrenewDate" class="col-sm-2"><p><strong>下次续费日期：</strong>{$nextrenewdate}</p></div> -->
							
							<div id="divApplyDate" class="form-group col-sm-2">
								<label class="control-label" for="applydate">申请日期&nbsp;<span class="glyphicon glyphicon-asterisk text-danger"></span></label>
								<input class="form-control" name="applydate" id="applydate" type="text" value="{$applydate}" >
							</div>
							
							<div id="divAJDate" class="form-group col-sm-2">
								<label class="control-label" for="authrejectdate">授权/驳回日期&nbsp;<span class="glyphicon glyphicon-asterisk text-danger"></span></label>
								<input class="form-control" name="authrejectdate" id="authrejectdate" type="text" value="{$authrejectdate}" >
							</div>
							
							<div id="divRADate" class="form-group col-sm-2">
								<label class="control-label" for="renewabandondate">续费/放弃日期&nbsp;<span class="glyphicon glyphicon-asterisk text-danger"></span></label>
								<input class="form-control" name="renewabandondate" id="renewabandondate" type="text" value="{$renewabandondate}" >
							</div>
							
							<div id="divNextrenewDate" class="form-group col-sm-2">
								<label class="control-label" for="nextrenewdate">下次续费日期&nbsp;<span class="glyphicon glyphicon-asterisk text-danger"></span></label>
								<input class="form-control" name="nextrenewdate" id="nextrenewdate" type="text" value="{$nextrenewdate}" >
							</div>
								
						</td>				
					</tr>
					
					<tr id="trMaintainer">
						<td>
							<div id="divPatNum" class="form-group col-sm-2">
								<label class="control-label" for="patnum">系统编号</label>
								<input class="form-control" name="patnum" id="patnum" type="text" value="{$patnum}" readonly>
							</div>
							
							<div id="divPatApplynum" class="form-group col-sm-2">
								<label class="control-label" for="patapplynum">申请编号&nbsp;<span class="glyphicon glyphicon-asterisk text-danger"></span></label>
								<input class="form-control" name="patapplynum" id="patapplynum" type="text" value="{$patapplynum}" >
							</div>
							
							<div id="divPatAuthnum" class="form-group col-sm-2">
								<label class="control-label" for="patauthnum">授权编号&nbsp;<span class="glyphicon glyphicon-asterisk text-danger"></span></label>
								<input class="form-control" id="patauthnum" name="patauthnum" value="{$patauthnum}" type="text">
							</div>
							
							<div id="divPatAgency" class="form-group col-sm-4">
								<label class="control-label" for="patagency">代理机构&nbsp;<span class="glyphicon glyphicon-asterisk text-danger"></span></label>
								<input class="form-control" name="patagency" id="patagency" type="text" value="{$patagency}" >
							</div>
							
							<div id="divPatAdmin" class="form-group col-sm-4">
								<label class="control-label" for="patadmin">授权机构&nbsp;<span class="glyphicon glyphicon-asterisk text-danger"></span></label>
								<input class="form-control" name="patadmin" id="patadmin" type="text" value="{$patadmin}" >
							</div>
							
							<div id="divRAReason" class="form-group col-sm-4">
								<label id="lbRAReason" class="control-label" for="abandonrejectreason">放弃/驳回原因&nbsp;<span class="glyphicon glyphicon-asterisk text-danger"></span></label>
								<input class="form-control" id="abandonrejectreason" name="abandonrejectreason" type="text" value="{$abandonrejectreason}">
							</div>
							
							<div id="divModSuggestion" class="form-group col-sm-4">
								<label id="lbRAReason" class="control-label" for="modsuggestion">修改建议&nbsp;<span class="glyphicon glyphicon-asterisk text-danger"></span></label>
								<input class="form-control" id="modsuggestion" name="modsuggestion" type="text" value="{$abandonrejectreason}">
							</div>
							
						</td>		
					</tr>
					
					<tr>
						<td>
							
							<div id="btnSave" class="col-sm-2">
								<input id="inSubmit" type="submit" class="btn btn-primary btn-xs" formenctype="multipart/form-data" value="保存专利信息">
								<input id="refresh" type="button" class="btn btn-primary btn-xs" value="重置">
								<!-- <button type="submit" class="btn btn-primary btn-xs">保存专利信息</button> -->
							</div>
			
						</td>		
					</tr>
					
				</tbody>
			</table>
		</form>
		
		<!-- 附件表单 -->
		<h3><span class="label label-warning glyphicon glyphicon-wrench">&nbsp;专利附件材料</span></h3>
		<table class="table table-bordered table-striped table-responsive table-condensed">
			<thead>
				<tr>
					<th>序号</th>
					<th>附件类型</th>
					<th>附件名称</th>
					<th>上传日期</th>
					<th>上传人</th>
					<th>系统角色</th>
					<th>操作</th>
				</tr>
			</thead>
			<tbody><!-- 此处显示数据库查询后的数据集 -->
					{volist name="atts" id="vo" empty="暂无附件"}
					<tr>
						<!-- <td><input type="checkbox" check=""></td> -->
						<td>{$i}</td>
						<td>{$vo.atttype}</a></td>
						<td>{$vo.name}</a></td>
						<td>{$vo.uploaddate}</td>
						<td>{$vo.uploader}</td>
						<td>{$vo.rolename}</td>
						<td>
							{eq name="vo.rolename" value="$rolename"}
								<a href="{$home}/attachment/index/download/id/{$vo.id}">下载</a>&nbsp;
								<!-- <a href="{$home}{$vo.attpath}">下载</a>&nbsp; -->
								<a href="{$home}/attachment/index/delete/id/{$vo.id}">删除</a>
							{else/}
								<a href="{$home}/attachment/index/download/id/{$vo.id}">下载</a>
							{/eq}
						</td>
					</tr>
					{/volist}
				
				</tbody>
		</table>
		
		<div class="btn-group-xs">
			<button id="btnUpload" type="button" class="btn btn-primary" formaction="">增加附件</button>
			<!-- <button type="button" class="btn btn-primary" formaction="">上移</button>
			<button type="button" class="btn btn-primary" formaction="">下移</button>
			<button type="button" class="btn btn-primary" formaction="">删除</button> -->				
		</div>
		<hr>

    </div>
	
	<div class="btn-group-sm">
		<button id='btnApply' type="button" class="btn btn-primary">“申报”已受理</button>
		<button id='btnReview' type="button" class="btn btn-primary" onclick="window.open('{$home}/patent/index/patinfo/id/{$id}')">浏览</button>	
		<button type="button" class="btn btn-primary btnReturn">返回</button>				
	</div>
	
</div>
</div>

</br>

<!-- Modal -->
	<div class="modal fade modal-lg" id="uploadFile" role="dialog">
		<div class="modal-dialog">
		
		  <!-- Modal content-->
			<div class="modal-content">
				<div class="modal-header">
				  <button type="button" class="close btn btn-primary" data-dismiss="modal">&times;</button>
				  <h4 class="modal-title"><span class="label label-warning glyphicon glyphicon-wrench">&nbsp;专利附件上传——"{$topic}"</span></h4>
				</div>
				
				<div class="modal-body">
					<blockquote>
						<p>选择上传的文件。</p>
						<footer>文件大小：<mark>10MB</mark>。文件类型：<mark>jpg,jpeg,pdf,doc,docx,xls,xlsx,ppt,pptx</mark></footer>
					</blockquote>
				  
					<form class="" role="form" action="{$home}/attachment/index/upload" method="post">
						
						<table id="tblAtt" class="table table-bordered table-striped table-condensed">
						<tbody>						
							<tr>
								<div class="form-group col-sm-5">
									<label for="atttype">附件类型</label>
									<select class="form-control" id="atttype" name="atttype" >
										<option value="申请">申请</option>
										<option value="报告/说明">报告/说明</option>
										<option value="存档文件">存档文件</option>
										
									</select>
								</div>
								
								<div class="form-group col-sm-7">
									<label for="num_type">附件名称</label>
									<input class="form-control" type="text" name="name" placeholder="填写附件的文件名" required/>
								</div>
								
							</tr>
							
							<tr>
								<div class="form-group col-sm-5">
									<label class="control-label" for="uploaddate">上传日期</label>
									<input class="form-control" id="uploaddate" name="uploaddate" value="{$uploaddate}" type="text" readonly>
								</div>
								
								<div class="form-group col-sm-4">
									<label class="control-label" for="num_id">专利编号</label>
									<input class="form-control" id="num_id" name="num_id" value="{$patnum}" type="text" readonly>
								</div>
								
								<div class="form-group col-sm-3" hidden>
									<label class="control-label" for="num_type">事务类型</label>
									<input class="form-control" id="num_type" name="num_type" value="{$type}" type="text" readonly>
								</div>
							</tr>
								
							<tr>	
								<div class="form-group col-sm-5">
									<label class="control-label" for="uploader">上传人</label>
									<input class="form-control" id="uploader" name="uploader" value="{$username}" type="text" readonly>
								</div>
								
								<div class="form-group col-sm-4">
									<label class="control-label" for="rolename">系统角色</label>
									<input class="form-control" id="rolename" name="rolename" value="{$rolename}" type="text" readonly>
								</div>
								
							</tr>
							
							<tr>
								<input type="file" name="file" > <br/>
								<input type="submit" formenctype="multipart/form-data" value="上传" > 
							</tr>
						</tbody>
					</table>
						
					</form> 
				</div>
			
				<div class="modal-footer">
					<button type="button" class="btn btn-primary btn-sm" data-dismiss="modal">关闭</button>
				</div>
			
			</div>
		  
		</div>
	</div>
	<!-- /Modal -->

<!-- /pagewrap  -->

<script>
$(document).ready(function(){

	$(".btnReturn").click(function(){
		window.location.href="{$home}/user/content/index/role/maintainer/active/1/type/2";
	});
	
	<!-- 显示有关的项目信息 -->
	if({$flag}){
		$("#pronum").empty();
		{foreach $pronum as $num} 
			{if $num eq '无'}
				$("#pronum").append("<option value='0'><ul><li>……无……</li></ul></option>");
			{else /}
				$("#pronum").append("<option value='{$num}'><ul><li>《XXX设备研制》（{$num}）</li><li>纵向（市）</li></ul></option>");
			{/if}
		{/foreach}
	}
	
	<!-- 显示所有在研的项目信息 -->
	$("#reselect").click(function(){
		$("#pronum").empty();
		
		$("#pronum").append("<option value='0'><ul><li>……无……</li></ul></option>");
		$("#pronum").append("<option value='pro2011004'><ul><li>《XXX设备研制》</li><li>纵向（市）</li></ul></option>");
		$("#pronum").append("<option value='pro2011018'><ul><li>“一种关于高尔夫发球机推球装置”</li><li>横向</li></ul></option>");
		$("#pronum").append("<option value='pro2013013'><ul><li>“xxxxxxx关键技术研究”</li><li>纵向（省）</li></ul></option>");
		$("#pronum").append("<option value='pro2014021'><ul><li>“xxxxxxx技术开发”</li><li>纵向（市）</li></ul></option>");
		
	});
	
	$("#btnUpload").click(function(){
        $("#uploadFile").modal();
    });

    $("#refresh").click(function(){
        refresh();
    });

	<!-- 专利已向外提交申请 -->
	$("#btnApply").click(function(){
		<!-- 弹出自定义提示页面，确定后跳转并传参  -->
		$.confirm('确定&nbsp;‘专利已申请’&nbsp;？各*项已正确填写？',function(e){
			con=e;
			if(true==con)window.location.href="{$home}/patent/index/patapply/id/{$id}";
			
		}).ok('确定').cancel('取消');
	
	
        
    });
	
	
	
	<!-- 专利状态非“填报”，页面显示微调-->
	$("#trMaintainer").hide();
	switch('{$status}'){
		case '新增':
			$("#divAddnewDate").html('<p><strong>填报日期：</strong>{$addnewdate}</p>');
			$("#divAJDate").remove();
			$("#divNextrenewDate").remove();
			$("#divRADate").remove();
			
			$("#trMaintainer").show();
			$("#divPatAuthnum").remove();
			$("#divRAReason").remove();
			$("#divModSuggestion").remove();
			
		break;
			
		case '申报':
			$("#divAddnewDate").html('<p><strong>填报日期：</strong>{$addnewdate}</p>');
			$("#divNextrenewDate").remove();
			$("#divRADate").remove();
			
			$("#trMaintainer").show();
			$("#divPatAuthnum").remove();
			$("#divRAReason").remove();
			$("#divModSuggestion").remove();
			
		break;
		
		case '返回修改':
			$("#divAddnewDate").html('<p><strong>修改日期：</strong>{$addnewdate}</p>');
			$("#divAJDate").html('<p><strong>授权日期：</strong>{$authrejectdate}</p>');
			$("#divRADate").html('<p><strong>续费日期：</strong>{$renewabandondate}</p>');
			$("#divNextrenewDate").remove();
			$("#divRADate").remove();
			
			$("#trMaintainer").show();
			$("#divPatAuthnum").remove();
			$("#divRAReason").remove();
		break;
		
		case '授权':
			$("#divAddnewDate").html('<p><strong>填报日期：</strong>{$addnewdate}</p>');
			$("#divAJDate").html('<p><strong>授权日期：</strong>{$authrejectdate}</p>');
			$("#divRADate .control-label").html('初次续费日期&nbsp;<span class="glyphicon glyphicon-asterisk text-danger"></span>');
			$("#divNextrenewDate").remove();
			
			$("#trMaintainer").show();
			$("#divRAReason").remove();
			$("#divModSuggestion").remove();
			
		break;
		
		case '续费授权':
			$("#divAddnewDate").html('<p><strong>填报日期：</strong>{$addnewdate}</p>');
			$("#divAJDate").html('<p><strong>授权日期：</strong>{$authrejectdate}</p>');
			$("#divRADate .control-label").html('初次续费日期&nbsp;<span class="glyphicon glyphicon-asterisk text-danger"></span>');
			$("#divNextrenewDate").remove();
			
			$("#trMaintainer").show();
			$("#divRAReason").remove();
			$("#divModSuggestion").remove();
			
		break;
		
		case '放弃':
			$("#trMaintainer").show();
			$("#di").remove();
			$("#di").remove();
			$("#di").remove();
		break;
		
		case '驳回':
			$("#trMaintainer").show();
			$("#di").remove();
			$("#di").remove();
			$("#di").remove();
		break;
		
		case '续费中':
			$("#trMaintainer").show();
			$("#di").remove();
			$("#di").remove();
			$("#di").remove();
		break;
			
		default:
			
		break;
		
	}
		
		
		
	
	
});

<!-- jQuery functions -->
	function refresh(){
    window.location.reload();//刷新当前页面.
     
    //或者下方刷新方法
    //parent.location.reload()刷新父亲对象（用于框架）--需在iframe框架内使用
    // opener.location.reload()刷新父窗口对象（用于单开窗口
  //top.location.reload()刷新最顶端对象（用于多开窗口）
	}
	
<!--/ jQuery functions -->

</script>

	
{include file="../application/common/footer.html"}
